#!/usr/bin/env ruby

subcmd = ARGV.shift
begin
  exec "#{File.basename(__FILE__)}-#{subcmd}", *ARGV rescue nil
  ENV['RUBYOPT'] = "#{ENV['RUBYOPT']} -I #{File.expand_path('../../lib', File.realpath(__FILE__))}"
  exec File.expand_path("../coresys-#{subcmd}", File.realpath(__FILE__)), *ARGV
rescue Errno::ENOENT
  puts "No command '#{subcmd}' found"
  exit 1
rescue Exception => e
  p e
  exit 1
end
